# Примеры использования API в Postman

## Настройка запроса

### Базовый запрос для загрузки файла

1. **Метод**: `POST`
2. **URL**: `http://localhost:8080/upload`
3. **Body**: 
   - Тип: `form-data`
   - Ключ: `file` (тип: File)
   - Значение: выберите файл для загрузки

## Примеры файлов для тестирования

### 1. Текстовый файл (test.txt)

Создайте файл `test.txt` со следующим содержимым:
```
Привет из Postman!
Это тестовый файл для загрузки в MinIO.
Дата: 2024
```

**В Postman:**
- Body → form-data
- Ключ: `file` (выберите тип File)
- Нажмите "Select Files" и выберите `test.txt`
- Нажмите "Send"

### 2. JSON файл (data.json)

Создайте файл `data.json`:
```json
{
  "name": "Тестовые данные",
  "version": "1.0.0",
  "items": [
    {"id": 1, "name": "Элемент 1"},
    {"id": 2, "name": "Элемент 2"}
  ]
}
```

**В Postman:**
- Аналогично примеру 1, но выберите `data.json`

### 3. PNG изображение (image.png)

Используйте любое PNG изображение с вашего компьютера.

**В Postman:**
- Аналогично примеру 1, но выберите PNG файл

## Ожидаемые ответы

### Успешная загрузка (200 OK)

```json
{
  "success": true,
  "message": "Файл успешно загружен в MinIO",
  "fileName": "test.txt",
  "fileSize": 1024,
  "fileType": "text/plain",
  "objectKey": "test.txt"
}
```

### Ошибка валидации типа файла (400 Bad Request)

```json
{
  "success": false,
  "message": "неподдерживаемый тип файла. Разрешены только: .txt, .png, .json"
}
```

### Ошибка загрузки (500 Internal Server Error)

```json
{
  "success": false,
  "message": "Ошибка загрузки в S3: ..."
}
```

## Health Check

**GET** `http://localhost:8080/health`

Ожидаемый ответ:
```json
{
  "status": "ok",
  "service": "s3-uploader"
}
```

## Проверка загруженных файлов

После успешной загрузки проверьте файлы в MinIO:

1. Откройте http://localhost:9001 в браузере
2. Войдите:
   - Логин: `minioadmin`
   - Пароль: `minioadmin`
3. Откройте бакет `my-bucket`
4. Найдите загруженный файл

## Советы

- Убедитесь, что сервисы запущены: `docker-compose up -d`
- Проверьте, что порт 8080 свободен
- Используйте файлы с правильными расширениями: `.txt`, `.png`, `.json`
- Максимальный размер файла: 32 MB

